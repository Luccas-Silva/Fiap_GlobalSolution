<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Alertas</title>
  <link rel="stylesheet" th:href="@{/css/Alertas.css}" />
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<h1>Alertas</h1>
<a th:href="@{/alerta/novo}">Novo Alerta</a>
<br/><br/>
<div th:if="${mensagem}" style="color:green" th:text="${mensagem}"></div>
<div th:if="${erro}" style="color:red" th:text="${erro}"></div>
<table border="1">
  <thead>
  <tr>
    <th>Tipo</th>
    <th>Nível Gravidade</th>
    <th>Data Geração</th>
    <th>Status</th>
    <th>Área de Risco</th>
    <th>Equipe Resposta</th>
    <th>Ações</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="alerta : ${alertas}">
    <td th:text="${alerta.nomeTipoAlerta}"></td>
    <td th:text="${alerta.nivelGravidadeAlerta}"></td>
    <td th:text="${alerta.dataGeracao}"></td>
    <td th:text="${alerta.statusAlerta}"></td>
    <td th:text="${alerta.areaRisco != null ? alerta.areaRisco.nomeArea : 'Sem área'}"></td>
    <td th:text="${alerta.equipeResposta != null ? alerta.equipeResposta.nomeEquipe : 'Sem equipe'}"></td>
    <td>
      <a th:href="@{'/alerta/editar/' + ${alerta.idAlerta}}">Editar</a> |
      <a th:href="@{'/alerta/deletar/' + ${alerta.idAlerta}}"
         onclick="return confirm('Tem certeza que deseja deletar este alerta?');">Deletar</a>
    </td>
  </tr>
  </tbody>
</table>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>